# 🎤 Q07. 교착상태(deadlock)에 대해 간단하게 설명해주세요.

> - 둘 이상의 스레드/프로세스가 서로 자원을 얻지 못해서 그 다음 처리를 하지 못하는 상태를 뜻합니다.
> - 무한히 다음 자원을 기다리게 되는 상태를 말하고, 시스템적으로는 한정된 자원을 여러 곳에서 사용하려고 할 때 발생합니다.
> - 데드락이 발생하는 조건은 상호 배제, 점유 대기, 비선점, 순환 대기입니다. 이 **4가지 조건이 동시에 성립할 때** 발생할 수 있습니다.
> - 데드락 문제를 해결하는 방법에는 무시, 예방, 회피, 탐지-회복의 4가지 방법이 있습니다.

<p align="center">
    <img src="/운영체제/jaeseok/img/deadlock.png" width="600"/>
</p>

> 서로 원하는 자원이 상대방에게 모두 할당되어 있어서 두 프로세스는 무한정 wait 상태에 빠지게 된다.

<br/>

## 🖋️ 데드락의 발생 조건

- 아래 4가지 조건이 동시에 성립할 때 발생할 수 있다.

### 상호 배제(mutual exclusion, mutex)

- 동시에 한 스레드만 자원을 점유할 수 있는 상황
- 다른 스레드가 자원을 사용하려면 자원이 방출될 때까지 기다려야 한다.

### 점유 대기(hold-and-wait)

- 스레드가 자원을 보유한 상태에서 다른 스레드가 보유한 자원을 추가로 기다리는 상황

### 비선점(no preemption)

- 다른 스레드가 사용 중인 자원을 강제로 선점할 수 없는 상황
- 자원을 점유하고 있는 스레드에 의해서만 자원이 방출된다.

### 순환 대기(circular wait)

- 대기 중인 스레드들이 순환 형태로 자원을 대기하고 있는 상황

<br/>

## 🖋️ 데드락 해결 방법

### 1. 무시

- 데드락 발생 확률이 낮은 시스템에 대해 어떤 조치도 취하지 않고 데드락을 무시하는 방법
- 현대 시스템에서는 데드락이 잘 발생하지 않고, 데드락에 대한 해결 비용이 크기 때문에 무시 방법이 많이 사용된다.
- 시스템 성능 저하가 없다는 큰 장점이 있다.

### 2. 예방

- 교착 상태의 4가지 발생 조건 중 하나가 성립하지 않게 하는 방법
- 순환 대기 조건이 성립하지 않도록 하는 것이 현실적으로 가능한 예방 기법
- 자원 사용의 효율성이 떨어지고 비용이 크다.

### 3. 회피

- 스레드가 앞으로 자원을 어떻게 요청할지에 대한 정보를 통해서 순환 대기 상태가 발생하지 않도록 자원을 할당하는 방법
- 자원 할당 그래프 알고리즘, 은행원 알고리즘 등을 사용하여 자원을 할당하여 데드락을 회피한다.

### 4. 탐지-회복

- 시스템 검사를 통해서 데드락 발생을 탐지하고, 이를 회복시키는 방법
- 자원 사용의 효율성이 떨어지고 비용이 크다.

<br/>
<br/>

## 📖 Reference.

- [차근차근 시작하는 GCD — 14, Medium](https://sujinnaljin.medium.com/ios-%EC%B0%A8%EA%B7%BC%EC%B0%A8%EA%B7%BC-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-gcd-14-4aefd4ba1eb7)